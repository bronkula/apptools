!function(t){function e(t){var n=this;this.originalHash=location.hash,this.updateUrl=!1,this.stateObj={title:null,url:null},this.currentSection=null,this.previousSection=null,this.navHistory=[],this.sections=[],this.mainElement=i(t||"body"),this.makeTabList(),this.setTemplates(),this.setEvents(),setTimeout(function(){n.init(t)},1),e.tites.push(this)}e.tites=[],e.prototype.init=function(){console.log("prototight"),this.setInitialActive()},e.prototype.makeTabList=function(){var t=this;this.sections=[],i("[data-role='page']").forEach(function(e){e.classList.add(e.id),t.sections.push(e.id)})},e.prototype.setInitialActive=function(){var t=""!==this.originalHash?this.originalHash.substr(1):"";this.sections.includes(t)||(t=this.sections[0]),this.setActiveSection({title:t,url:location.href})},e.prototype.setActiveSection=function(t,e){document.dispatchEvent(new CustomEvent("pageshow",{detail:{nextPage:{title:t.title,url:t.url,el:i("."+t.title)[0]},prevPage:{title:this.stateObj.title,url:this.stateObj.url,el:i(null===this.stateObj.title?"":"."+this.stateObj.title)[0]}}})),this.stateObj={title:t.title,url:t.url},this.showActiveSection(),history[e?"pushState":"replaceState"](t,t.title,t.url)},e.prototype.showActiveSection=function(){i("[data-role='page'].active").forEach(t=>t.classList.remove("active")),i("."+this.stateObj.title).forEach(t=>t.classList.add("active"))},e.prototype.changeSection=function(e,i){"back"==e?null!=history.state&&t.history.back():history.pushState?this.setActiveSection({title:e,url:t.location.origin+t.location.pathname+"#"+e},i):location.assign(this.stateObj)},e.prototype.setTemplates=function(){i("[data-template]").forEach(t=>{let e=Object.assign({},t.dataset);for(let t in e)e[t]=o(e[t])?JSON.parse(e[t]):e[t];t.innerHTML=l(i(e.template)[0].innerHTML)(e)})},e.prototype.activate=function(t,e,o){var c;switch(e){case"next":c=n(t);break;case"prev":c=s(t);break;case"parent":c=a(t);break;default:c=i(e)}c.forEach(t=>t.classList[o]("active"))},e.prototype.setEvents=function(t){var e=this;c(this.mainElement[0],"click","[data-role='jump']",function(t){return t.preventDefault(),e.changeSection([].find.call(this.attributes,t=>"href"==t.nodeName).value.substr(1),!0),!1}),c(this.mainElement[0],"click","[data-toggle]",function(t){e.activate(this,this.dataset.toggle,"toggle")}),c(this.mainElement[0],"click","[data-activate]",function(t){e.activate(this,this.dataset.activate,"add")}),c(this.mainElement[0],"click","[data-deactivate]",function(t){e.activate(this,this.dataset.deactivate,"remove")})};const i=t=>t instanceof HTMLElement?[t]:t.isArray?t:t?[].slice.call(document.querySelectorAll(t)):[],n=t=>t.nextSibling instanceof HTMLElement?[t.nextSibling]:n(t.nextSibling),s=t=>t.previousSibling instanceof HTMLElement?[t.previousSibling]:s(t.previousSibling),a=t=>[t.parentElement],o=function(t){try{return JSON.parse(t)&&!!t}catch(t){return!1}},c=function(t,e,i,n){t=this;e.split(" ").forEach(function(e){t.addEventListener(e,function(t){[].forEach.call(document.querySelectorAll(i),function(e){t.target==e&&n.apply(t.target,[t])})},!1)})},l=function(t){var e=function(t,i){if(void 0===t)return!1;var n=i.indexOf(".");return n>-1?e(t[i.substr(0,n)],i.substr(n+1)):t[i]};return function(i){for(var n,s,a,o,c,l=(n=t,(s=document.createElement("textarea")).innerHTML=n,s.value),r=/<%=\s*(.+?)\s*%>/;a=r.exec(l);)c=a[1].split(":"),o=e(i,c[0]),l=a.input.substr(0,a.index)+(void 0!==o?o:void 0===c[1]?"[undefined]":c[1])+a.input.substr(a[0].length+a.index);return l}};t.onpopstate=function(t){e.tites.forEach(e=>null!=t.state?e.setActiveSection(t.state):e.setInitialActive())},t.document.addEventListener("DOMContentLoaded",()=>new e)}(window);