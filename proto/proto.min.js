!function(t){function e(t){var e=this;this.originalHash=location.hash,this.updateUrl=!1,this.stateObj={title:null,url:null},this.currentSection=null,this.previousSection=null,this.navHistory=[],this.sections=[],this.mainElement=$(t||"body"),this.makeTabList(),this.setTemplates(),this.setEvents(),setTimeout(function(){e.init(t)},1)}e.prototype.init=function(){this.setInitialActive()},e.prototype.makeTabList=function(){var t=this;this.sections=[],$("[data-role='page']").each(function(e){var i=$(this).attr("id");$(this).addClass(i),t.sections.push(i)})},e.prototype.setInitialActive=function(){var t=""!==this.originalHash?this.originalHash.substr(1):"";-1===$.inArray(t,this.sections)&&(t=this.sections[0]),this.setActiveSection({title:t,url:location.href})},e.prototype.setActiveSection=function(t,e){$(document).trigger("pageshow",{nextPage:{title:t.title,url:t.url,el:$("."+t.title)},prevPage:{title:this.stateObj.title,url:this.stateObj.url,el:$(null===this.stateObj.title?"":"."+this.stateObj.title)}}),this.stateObj={title:t.title,url:t.url},this.showActiveSection(),history[e?"pushState":"replaceState"](t,t.title,t.url)},e.prototype.showActiveSection=function(){$("[data-role='page'].active").removeClass("active"),$("."+this.stateObj.title).addClass("active")},e.prototype.changeSection=function(e,i){"back"==e?null!=history.state&&t.history.back():history.pushState?this.setActiveSection({title:e,url:t.location.origin+t.location.pathname+"#"+e},i):location.assign(this.stateObj)},e.prototype.setTemplates=function(){var t=this;$("[data-template]").each(function(){$(this).html(t.mt($($(this).data("template")).html())($(this).data()))})},e.prototype.activate=function(t,e,i){var a;switch(e){case"next":a=$(t).next();break;case"prev":a=$(t).prev();break;case"parent":a=$(t).parent();break;default:a=$(e)}a[i]("active")},e.prototype.setEvents=function(t){var e=this;this.mainElement.on("click","[data-role='jump']",function(t){return t.preventDefault(),e.changeSection($(this).attr("href").substr(1),!0)}).on("click","[data-toggle]",function(t){t.preventDefault(),e.activate(this,$(this).data("toggle"),"toggleClass")}).on("click","[data-activate]",function(t){t.preventDefault(),e.activate(this,$(this).data("activate"),"addClass")}).on("click","[data-deactivate]",function(t){t.preventDefault(),e.activate(this,$(this).data("deactivate"),"removeClass")})},e.prototype.mt=function(t){var e=e=function(t,i){if(void 0===t)return!1;var a=i.indexOf(".");return a>-1?e(t[i.substr(0,a)],i.substr(a+1)):t[i]};return function(i){for(var a,s,n,o,r,c=(a=t,(s=document.createElement("textarea")).innerHTML=a,s.value),l=/<%=\s*(.+?)\s*%>/;n=l.exec(c);)r=n[1].split(":"),o=e(i,r[0]),c=n.input.substr(0,n.index)+(void 0!==o?o:void 0===r[1]?"[undefined]":r[1])+n.input.substr(n[0].length+n.index);return c}},t.BaseProto=e,t.onpopstate=function(t){null!=t.state?bp.setActiveSection(t.state):bp.setInitialActive()}}(window);
//# sourceMappingURL=proto/proto.min.js.map