<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Q Route Tests</title>

   <link rel="stylesheet" href="/apptools/core_css/dist/core.css">
   <script src="/apptools/tools/dist/query.min.js"></script>
   <script src="/apptools/tools/dist/query-route.min.js"></script>
</head>
<body>
    <script>
    console.log(q)
    const tell = (str) => (props) => {
        console.log(str,props);
        q(".output").html(`
        <div>${str}</div>
        ${Object.entries(props).reduce((r,[k,v])=>r+`<div><strong>${k}</strong> <span>${v}</span></div>`,'')}
        `)
    }
    const testroutes = () => {
        q.route.make({
            'test':tell('test'),
            'test/add/:id':tell('add id'),
            'test/:id/add':tell('id add'),
            'test/:id/edit':tell('id edit'),
            'test/add':tell('add'),
            'test/:id':tell('id'),
        },tell('no match'))()
    }
    window.addEventListener("DOMContentLoaded",()=>{
        document.querySelectorAll("a").forEach((el)=>{
            el.addEventListener("click",()=>{
                setTimeout(testroutes,10)
            })
        })
    })
    </script>
    <ul>
        <li><a href="#test">test</a></li>
        <li><a href="#test4">test4</a></li>
        <li><a href="#test/add">test add</a></li>
        <li><a href="#test/add/1">test add 1</a></li>
        <li><a href="#test/1/add">test 1 add</a></li>
        <li><a href="#test/1/edit">test 1 edit</a></li>
        <li><a href="#test/1">test 1</a></li>
    </ul>
    <div class="output"></div>
</body>
</html>