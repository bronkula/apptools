const templater=e=>t=>(Array.isArray(t)?t:[t]).reduce((t,r,n,o)=>t+e(r,n,o),""),someProps=(e,t)=>r=>e.some(e=>RegExp(t,"i").test(r[e])),somePropsAll=(e,t,r)=>e.filter(someProps(t,r)),somePropsFirst=(e,t,r)=>e.find(someProps(t,r)),somePropsIndex=(e,t,r)=>e.findIndex(someProps(t,r)),sameProps=e=>t=>Object.keys(e).every(r=>t[r]===e[r]),samePropsAll=(e,t)=>e.filter(sameProps(t)),samePropsFirst=(e,t)=>e.find(sameProps(t)),samePropsIndex=(e,t)=>e.findIndex(sameProps(t)),zeros=(e,t)=>(+e+Math.pow(10,t)+"").substr(1),numberCommas=e=>(e+"").replace(/\B(?=(?=\d*\.)(\d{3})+(?!\d))/g,","),moneyCommas=(e,t=2)=>"$"+numberCommas(e.toFixed(t)),arrayReplace=(e,t)=>r=>e.reduce((e,r,n)=>e.replace(r,t[n]),r),readFiles=(e,t,r=0)=>{if(e&&e[r]){let n=new FileReader;n.onload=(n=>{t(n),readFiles(e,t,r+1)}),n.readAsDataURL(e[r])}},compose=(...e)=>t=>e.reduceRight((e,t)=>t(e),t),pipe=(...e)=>t=>e.reduce((e,t)=>t(e),t),trace=e=>t=>(console.log(`${e}: ${t}`),t),delay=e=>new Promise(t=>setTimeout(t,e)),aGetFile=async e=>{const t=await fetch(e);return await t.json()},checkData=(e,t=10)=>new Promise(r=>{const n=()=>e()?r(e()):setTimeout(n,t);n()}),mapJoin=(e,t,r)=>e.map(t).join(r),splitMapJoin=(e,t,r,n=/\s?,\s?/)=>mapJoin(Array.isArray(e)?e:e.split(n),t,r),getStore=e=>void 0!==localStorage[e]?JSON.parse(localStorage[e]):[],setStore=(e,t)=>localStorage[e]=JSON.stringify(t),order=(e,t="order",r=!1)=>e.slice().sort((e,n)=>e[t]>n[t]?r?-1:1:e[t]<n[t]?r?1:-1:0);(e=>{const q=(e,t)=>new Q(e,t);q.getPath=(e=>e.path||e.composedPath&&e.composedPath()),q.isHTML=(e=>e instanceof HTMLElement||e instanceof HTMLDocument),q.isString=(e=>"string"==typeof e||e instanceof String),q.isArray=(e=>Array.isArray(e)),q.inPath=((e,t)=>q.getPath(e).some(e=>e==t)),q.make=function(e){return q([...document.createRange().createContextualFragment(e).childNodes])};class Q{constructor(e,t=document){let r=e&&q.isHTML(t)?q.isHTML(e)||e==t?[e]:q.isArray(e)?e:q.isString(e)&&"<"==e.trim()[0]?q.make(e):t.querySelectorAll(e):[];Object.assign(this,r),this.length=r.length}on(e,t,r=!1){return e.trim().split(/\s+/).forEach(e=>{this.forEach(n=>n.addEventListener(e,t,r))}),this}delegate(e,t,r){return this.on(e,e=>this.find(t).forEach(t=>q.inPath(e,t)?r.call(t,e,t):0),{capture:!0}),this}sift(e){return q([...new Set(this.flatMap(e))].reduce((e,t)=>t?e.concat([t]):e,[]))}}Q.prototype.forEach=Array.prototype.forEach,Q.prototype.map=Array.prototype.map,Q.prototype.flatMap=Array.prototype.flatMap,Q.prototype.reduce=Array.prototype.reduce,Q.prototype.some=Array.prototype.some,Q.prototype.every=Array.prototype.every,Q.prototype.filter=Array.prototype.filter,q.extend=((e,t,r=!1)=>{q.hasExtension(e)&&!r||(Q.prototype[e]=t)}),q.hasExtension=(e=>"function"==typeof Q.prototype[e]),q.Q=(()=>Q.prototype),e.q=q})(window),(()=>{if(!q)throw"qjs not imported yet";q.fetch=(e=>fetch(e).then(e=>e.json())),q.fetchAll=(e=>Promise.all(e.map(e=>q.fetch(e)))),q.fetchEach=((e,t=(e=>e))=>e.map(e=>r=>q.fetch(e).then(e=>r.concat([t(e)]))).reduce((e,t)=>e.then(t),Promise.resolve([]))),q.post=((e,t)=>fetch(e,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)}).then(e=>e.json()))})(),(()=>{if(!q)throw"qjs not imported yet";console.log(q.extend),q.setAttr=function(e,t){for(let r in t)t.hasOwnProperty(r)&&e.setAttribute(r,t[r]);return e},q.setCache=function(e,t,r){void 0===e.qcache&&(e.qcache={}),e.qcache[t]=r},q.setData=function(e,t){void 0===e.qcache&&(e.qcache={});for(let r in t)t.hasOwnProperty(r)&&(e.qcache[r]=t[r]);return e},q.getData=function(e,t){if(void 0===e.qcache)for(let[t,r]of Object.entries(e.dataset))q.setCache(e,t,JSON.data.parse(r));return void 0!==e.dataset[t]&&e.qcache[t]!=e.dataset[t]&&q.setCache(e,t,JSON.parse(e.dataset[t])),e.qcache[t]},q.extend("remove",function(){return this.sift(e=>(e.parentElement.removeChild(e),!1))}),q.extend("append",function(e){return this.sift(t=>e.map(e=>(t.appendChild(e),t)))}),q.extend("appendTo",function(e){return this.sift(t=>e.map(e=>(e.appendChild(t),t)))}),q.extend("prepend",function(e){return this.sift(t=>e.map(e=>(t.insertBefore(e,t.children[0]),t)))}),q.extend("style",function(e){return q.isString(e)?this[0].style[e]:this.sift(t=>(Object.assign(t.style,e),t))}),q.extend("attr",function(e){return q.isString(e)?this[0].getAttribute(e):this.sift(t=>q.setAttr(t,e))}),q.extend("data",function(e){return q.isString(e)?q.getData(this[0],e):this.sift(t=>q.setData(t,e))})})(),(()=>{if(!q)throw"qjs not imported yet";q.extend("toArray",function(){return this.reduce((e,t)=>e.concat([t]),[])}),q.extend("is",function(e){return this.every(t=>t.matches(e))}),q.extend("find",function(e){return q(this.reduce((t,r)=>[...t,...q(e,r).toArray()],[]))}),q.extend("next",function(){return this.sift(e=>e.nextElementSibling)}),q.extend("prev",function(){return this.sift(e=>e.previousElementSibling)}),q.extend("parent",function(){return this.sift(e=>e.parentElement)}),q.extend("closest",function(e){return this.sift(t=>t.closest(e))}),q.extend("children",function(e){return this.sift(t=>[...t.children].filter(t=>!e||!!t.matches(e)&&t))}),q.extend("last",function(){return q(this[this.length-1])}),q.extend("first",function(){return q(this[0])}),q.extend("siblings",function(e){return this.sift(t=>[...t.parentElement.children].filter(r=>r!=t&&(!e||r.matches(e))))})})();