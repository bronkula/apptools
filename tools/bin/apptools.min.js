const templater=e=>t=>(Array.isArray(t)?t:[t]).reduce((t,r,s,a)=>t+e(r,s,a),""),someProps=(e,t)=>r=>e.some(e=>RegExp(t,"i").test(r[e])),somePropsAll=(e,t,r)=>e.filter(someProps(t,r)),somePropsFirst=(e,t,r)=>e.find(someProps(t,r)),somePropsIndex=(e,t,r)=>e.findIndex(someProps(t,r)),sameProps=e=>t=>Object.keys(e).every(r=>t[r]===e[r]),samePropsAll=(e,t)=>e.filter(sameProps(t)),samePropsFirst=(e,t)=>e.find(sameProps(t)),samePropsIndex=(e,t)=>e.findIndex(sameProps(t)),zeros=(e,t)=>(+e+Math.pow(10,t)+"").substr(1),numberCommas=e=>(e+"").replace(/\B(?=(?=\d*\.)(\d{3})+(?!\d))/g,","),moneyCommas=(e,t=2)=>"$"+numberCommas(e.toFixed(t)),arrayReplace=(e,t)=>r=>e.reduce((e,r,s)=>e.replace(r,t[s]),r),readFiles=(e,t,r=0)=>{if(e&&e[r]){let s=new FileReader;s.onload=(s=>{t(s),readFiles(e,t,r+1)}),s.readAsDataURL(e[r])}},compose=(...e)=>t=>e.reduceRight((e,t)=>t(e),t),pipe=(...e)=>t=>e.reduce((e,t)=>t(e),t),trace=e=>t=>(console.log(`${e}: ${t}`),t),delay=e=>new Promise(t=>setTimeout(t,e)),aGetFile=async e=>{const t=await fetch(e);return await t.json()},checkData=(e,t=10)=>new Promise(r=>{const s=()=>e()?r(e()):setTimeout(s,t);s()}),mapJoin=(e,t,r)=>e.map(t).join(r),splitMapJoin=(e,t,r,s=/\s?,\s?/)=>mapJoin(Array.isArray(e)?e:e.split(s),t,r),getStore=e=>void 0!==localStorage[e]?JSON.parse(localStorage[e]):[],setStore=(e,t)=>localStorage[e]=JSON.stringify(t),order=(e,t="order",r=!1)=>e.slice().sort((e,s)=>e[t]>s[t]?r?-1:1:e[t]<s[t]?r?1:-1:0);(e=>{const t=(e,t)=>new r(e,t);t.fetch=(e=>fetch(e).then(e=>e.json())),t.fetchAll=(e=>Promise.all(e.map(e=>t.fetch(e)))),t.fetchEach=((e,r=(e=>e))=>e.map(e=>s=>t.fetch(e).then(e=>s.concat([r(e)]))).reduce((e,t)=>e.then(t),Promise.resolve([]))),t.post=((e,t)=>fetch(e,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)}).then(e=>e.json())),t.getPath=(e=>e.path||e.composedPath&&e.composedPath()),t.isHTML=(e=>e instanceof HTMLElement||e instanceof HTMLDocument),t.isString=(e=>"string"==typeof e||e instanceof String),t.isArray=(e=>Array.isArray(e)),t.inPath=((e,r)=>t.getPath(e).some(e=>e==r)),t.make=function(e){return t([...document.createRange().createContextualFragment(e).childNodes])},t.setAttr=function(e,t){for(let r in t)t.hasOwnProperty(r)&&e.setAttribute(r,t[r]);return e},t.setCache=function(e,t,r){void 0===e.qcache&&(e.qcache={}),e.qcache[t]=r},t.setData=function(e,t){void 0===e.qcache&&(e.qcache={});for(let r in t)t.hasOwnProperty(r)&&(e.qcache[r]=t[r]);return e},t.getData=function(e,r){if(void 0===e.qcache)for(let[r,s]of Object.entries(e.dataset))t.setCache(e,r,JSON.data.parse(s));return void 0!==e.dataset[r]&&e.qcache[r]!=e.dataset[r]&&t.setCache(e,r,JSON.parse(e.dataset[r])),e.qcache[r]};class r{constructor(e,r=document){let s=e&&t.isHTML(r)?t.isHTML(e)||e==r?[e]:t.isArray(e)?e:t.isString(e)&&"<"==e.trim()[0]?t.make(e):r.querySelectorAll(e):[];Object.assign(this,s),this.length=s.length}on(e,t,r=!1){return e.trim().split(/\s+/).forEach(e=>{this.forEach(s=>s.addEventListener(e,t,r))}),this}delegate(e,r,s){return this.on(e,e=>this.find(r).forEach(r=>t.inPath(e,r)?s.call(r,e,r):0),{capture:!0}),this}sift(e){return t([...new Set(this.flatMap(e))].reduce((e,t)=>t?e.concat([t]):e,[]))}toArray(){return this.reduce((e,t)=>e.concat([t]),[])}is(e){return this.every(t=>t.matches(e))}find(e){return t(this.reduce((r,s)=>[...r,...t(e,s).toArray()],[]))}next(){return this.sift(e=>e.nextElementSibling)}prev(){return this.sift(e=>e.previousElementSibling)}parent(){return this.sift(e=>e.parentElement)}closest(e){return this.sift(t=>t.closest(e))}children(e){return this.sift(t=>[...t.children].filter(t=>!e||!!t.matches(e)&&t))}last(){return this.sift(e=>this[this.length-1])}first(){return this.sift(e=>this[0])}siblings(e){return this.sift(t=>[...t.parentElement.children].filter(r=>r!=t&&(!e||r.matches(e))))}remove(){return this.sift(e=>(e.parentElement.removeChild(e),!1))}append(e){return this.sift(t=>e.map(e=>(t.appendChild(e),t)))}appendTo(e){return this.sift(t=>e.map(e=>(e.appendChild(t),t)))}prepend(e){return this.sift(t=>e.map(e=>(t.insertBefore(e,t.children[0]),t)))}style(e){return t.isString(e)?this[0].style[e]:this.sift(t=>(Object.assign(t.style,e),t))}attr(e){return t.isString(e)?this[0].getAttribute(e):this.sift(r=>t.setAttr(r,e))}data(e){return t.isString(e)?t.getData(this[0],e):this.sift(r=>t.setData(r,e))}}r.prototype.forEach=Array.prototype.forEach,r.prototype.map=Array.prototype.map,r.prototype.flatMap=Array.prototype.flatMap,r.prototype.reduce=Array.prototype.reduce,r.prototype.some=Array.prototype.some,r.prototype.every=Array.prototype.every,r.prototype.filter=Array.prototype.filter,e.q=t})(window);