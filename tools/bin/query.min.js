const getPath=e=>e.path||e.composedPath&&e.composedPath(),isDoc=d=>d instanceof HTMLElement||d instanceof HTMLDocument,inPath=(ev,to)=>getPath(ev).some(o=>o==to),sift=f=>s=>[...new Set(s.map(f))],q=(s,sc=document)=>s&&isDoc(sc)?s instanceof HTMLElement||s==sc?[s]:Array.isArray(s)?s:sc.querySelectorAll(s):[],qon=sc=>{const d=q(sc),f=(es,fn)=>(es.trim().split(/\s+/).forEach(e=>d.forEach(o=>o.addEventListener(e,fn))),f);return f},qdelegate=sc=>{const d=qon(sc),f=(es,sl,fn)=>(d(es,ev=>q(sl).forEach(to=>inPath(ev,to)?fn.call(to,ev,to):0)),f);return f},qnext=sift(o=>o.nextElementSibling),qprev=sift(o=>o.previousElementSibling),qparent=sift(o=>o.parentElement),qis=(s1,s2)=>q(s1).some(o=>o.matches(s2)),qclosest=s=>sift(o=>o.closest(s));