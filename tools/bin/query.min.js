(t=>{const e=(t,e)=>new r(t,e);e.fetch=(t=>fetch(t).then(t=>t.json())),e.fetchAll=(t=>Promise.all(t.map(t=>e.fetch(t)))),e.fetchEach=((t,r=(t=>t))=>t.map(t=>i=>e.fetch(t).then(t=>i.concat([r(t)]))).reduce((t,e)=>t.then(e),Promise.resolve([]))),e.post=((t,e)=>fetch(t,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}).then(t=>t.json())),e.getPath=(t=>t.path||t.composedPath&&t.composedPath()),e.isHTML=(t=>t instanceof HTMLElement||t instanceof HTMLDocument),e.isString=(t=>"string"==typeof t||t instanceof String),e.isArray=(t=>Array.isArray(t)),e.inPath=((t,r)=>e.getPath(t).some(t=>t==r)),e.make=function(t){return e([...document.createRange().createContextualFragment(t).childNodes])},e.setAttr=function(t,e){for(let r in e)e.hasOwnProperty(r)&&t.setAttribute(r,e[r]);return t},e.setCache=function(t,e,r){void 0===t.qcache&&(t.qcache={}),t.qcache[e]=r},e.setData=function(t,e){void 0===t.qcache&&(t.qcache={});for(let r in e)e.hasOwnProperty(r)&&(t.qcache[r]=e[r]);return t},e.getData=function(t,r){if(void 0===t.qcache)for(let[r,i]of Object.entries(t.dataset))e.setCache(t,r,JSON.data.parse(i));return void 0!==t.dataset[r]&&t.qcache[r]!=t.dataset[r]&&e.setCache(t,r,JSON.parse(t.dataset[r])),t.qcache[r]};class r{constructor(t,r=document){let i=t&&e.isHTML(r)?e.isHTML(t)||t==r?[t]:e.isArray(t)?t:e.isString(t)&&"<"==t.trim()[0]?e.make(t):r.querySelectorAll(t):[];Object.assign(this,i),this.length=i.length}on(t,e,r=!1){return t.trim().split(/\s+/).forEach(t=>{this.forEach(i=>i.addEventListener(t,e,r))}),this}delegate(t,r,i){return this.on(t,t=>this.find(r).forEach(r=>e.inPath(t,r)?i.call(r,t,r):0),{capture:!0}),this}sift(t){return e([...new Set(this.flatMap(t))].reduce((t,e)=>e?t.concat([e]):t,[]))}toArray(){return this.reduce((t,e)=>t.concat([e]),[])}is(t){return this.every(e=>e.matches(t))}find(t){return e(this.reduce((r,i)=>[...r,...e(t,i).toArray()],[]))}next(){return this.sift(t=>t.nextElementSibling)}prev(){return this.sift(t=>t.previousElementSibling)}parent(){return this.sift(t=>t.parentElement)}closest(t){return this.sift(e=>e.closest(t))}children(t){return this.sift(e=>[...e.children].filter(e=>!t||!!e.matches(t)&&e))}last(){return this.sift(t=>this[this.length-1])}first(){return this.sift(t=>this[0])}siblings(t){return this.sift(e=>[...e.parentElement.children].filter(r=>r!=e&&(!t||r.matches(t))))}remove(){return this.sift(t=>(t.parentElement.removeChild(t),!1))}append(t){return this.sift(e=>t.map(t=>(e.appendChild(t),e)))}appendTo(t){return this.sift(e=>t.map(t=>(t.appendChild(e),e)))}prepend(t){return this.sift(e=>t.map(t=>(e.insertBefore(t,e.children[0]),e)))}style(t){return e.isString(t)?this[0].style[t]:this.sift(e=>(Object.assign(e.style,t),e))}attr(t){return e.isString(t)?this[0].getAttribute(t):this.sift(r=>e.setAttr(r,t))}data(t){return e.isString(t)?e.getData(this[0],t):this.sift(r=>e.setData(r,t))}}r.prototype.forEach=Array.prototype.forEach,r.prototype.map=Array.prototype.map,r.prototype.flatMap=Array.prototype.flatMap,r.prototype.reduce=Array.prototype.reduce,r.prototype.some=Array.prototype.some,r.prototype.every=Array.prototype.every,r.prototype.filter=Array.prototype.filter,t.q=e})(window);