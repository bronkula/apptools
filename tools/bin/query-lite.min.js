(t=>{const q=(t,e)=>new Q(t,e);q.getPath=(t=>t.path||t.composedPath&&t.composedPath()),q.isHTML=(t=>t instanceof HTMLElement||t instanceof HTMLDocument),q.isString=(t=>"string"==typeof t||t instanceof String),q.isArray=(t=>Array.isArray(t)),q.inPath=((t,e)=>q.getPath(t).some(t=>t==e)),q.make=function(t){return q([...document.createRange().createContextualFragment(t).childNodes])};class Q{constructor(t,e=document){let r=t&&q.isHTML(e)?q.isHTML(t)||t==e?[t]:q.isArray(t)?t:q.isString(t)&&"<"==t.trim()[0]?q.make(t):e.querySelectorAll(t):[];Object.assign(this,r),this.length=r.length}on(t,e,r=!1){return t.trim().split(/\s+/).forEach(t=>{this.forEach(o=>o.addEventListener(t,e,r))}),this}delegate(t,e,r){return this.on(t,t=>this.find(e).forEach(e=>q.inPath(t,e)?r.call(e,t,e):0),{capture:!0}),this}sift(t){return q([...new Set(this.flatMap(t))].reduce((t,e)=>e?t.concat([e]):t,[]))}}Q.prototype.forEach=Array.prototype.forEach,Q.prototype.map=Array.prototype.map,Q.prototype.flatMap=Array.prototype.flatMap,Q.prototype.reduce=Array.prototype.reduce,Q.prototype.some=Array.prototype.some,Q.prototype.every=Array.prototype.every,Q.prototype.filter=Array.prototype.filter,q.extend=((t,e,r=!1)=>{q.hasExtension(t)&&!r||(Q.prototype[t]=e)}),q.hasExtension=(t=>"function"==typeof Q.prototype[t]),q.Q=(()=>Q.prototype),t.q=q})(window);