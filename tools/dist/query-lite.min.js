(t=>{const q=(t,e,o)=>new Q(t,e,o);q.isElement=t=>t instanceof HTMLDocument||t instanceof HTMLElement||t instanceof SVGElement||t instanceof Element,q.isHTML=t=>t instanceof HTMLElement||t instanceof HTMLDocument,q.isSVG=t=>t instanceof SVGElement,q.isString=t=>"string"==typeof t||t instanceof String,q.isFunction=t=>"function"==typeof t,q.isQ=t=>t instanceof Q,q.isArray=t=>Array.isArray(t),q.isFragment=t=>q.isString(t)&&"<"==t.trim()[0],q.isEntity=t=>q.isString(t)&&"&"==t.trim()[0]&&";"==t.trim().substr(-1),q.isJson=t=>{t="string"!=typeof t?JSON.stringify(t):t;try{t=JSON.parse(t)}catch(t){return!1}return"object"==typeof t&&null!==t},q.parse=t=>{try{return JSON.parse(t)}catch(e){return t}},q.asArray=t=>Array.isArray(t)?t:[t],q.makeFragment=t=>q.isFragment(t)?[...document.createRange().createContextualFragment(t.trim()).childNodes]:[t],q.make=t=>q(q.makeFragment(t)),q.htmlEncode=function(t){let e=document.createElement("div");return e.innerHTML=t,e.innerText},q.extend=(t,e,o=!1)=>{q.asArray(t).forEach(t=>{q.hasExtension(t)&&!o||(Q.prototype[t]=e)})},q.hasExtension=t=>q.isFunction(Q.prototype[t]),q.sift=(t,e)=>{let o=t.toArray().flatMap(e);return[...new Set(o)]},q.settle=t=>t.flatMap(t=>t?q.isFragment(t)?q.makeFragment(t):q.isQ(t)?t.toArray():t:[]),q.debug=(t,e,o)=>{console.group(),console.log("debug"),console.log("selector",t),console.log("selector context",e),console.log("isHTML SC",q.isHTML(e)),console.log("isHTML S",q.isHTML(t)),console.log("isSVG S",q.isSVG(t)),console.log("isQ S",q.isQ(t)),console.log("isElement S",q.isElement(t)),console.log("isFragment S",q.isFragment(t)),console.log("isFunction S",q.isFunction(t)),console.log("isArray S",q.isArray(t)),console.log("isEntity S",q.isEntity(t)),console.log("isJson S",q.isJson(t)),console.log("querySelectorAll S",e.querySelectorAll(t)),console.log("new el",o),console.groupEnd()};class Q{constructor(t,e=document,o=!1){let n=t&&q.isElement(e)?q.isQ(t)?t.toArray():q.isElement(t)||t==e?[t]:q.isFragment(t)?q.makeFragment(t):q.isArray(t)?q.settle(t):q.isFunction(t)?!window.addEventListener("DOMContentLoaded",t):e.querySelectorAll(t):[];if(o&&q.debug(t,e,n),!n)return!1;Object.assign(this,n),this.length=n.length}find(t){return this.sift(e=>q(t,e))}sift(t){return q(q.sift(this,t))}pipe(t){return q(this.map(t))}is(t){return this.some(e=>e.matches(t))}not(t){return!this.is(t)}toArray(){return this.reduce((t,e)=>t.concat([e]),[])}toString(){return this.reduce((t,e)=>t+q.isElement(e)?e.outerHTML:""+e,"")}toText(){return this.reduce((t,e)=>t+q.isElement(e)?e.innerText:""+e,"")}}Q.prototype.forEach=Array.prototype.forEach,Q.prototype.map=Array.prototype.map,Q.prototype.flatMap=Array.prototype.flatMap,Q.prototype.reduce=Array.prototype.reduce,Q.prototype.some=Array.prototype.some,Q.prototype.every=Array.prototype.every,Q.prototype.filter=Array.prototype.filter,t.q=q})(window),(()=>{if(!q)throw"qjs not imported yet";q.getPath=t=>t.path||t.composedPath&&t.composedPath(),q.inPath=(t,e)=>q.getPath(t).some(t=>t==e),q.evPoints=t=>"touch"!=t.type.substring(0,5)?[t]:t.touches.length?t.touches:t.changedTouches,q.getEXY=(t,e)=>{let o=(e||t.target).getBoundingClientRect();return{x:t.pageX-o.left,y:t.pageY-o.top}},q.getEventXY=(t,e)=>q.getEXY(q.evPoints(t)[0],e),q.extend("on",(function(t,e,o=!1){return t.trim().split(/\s+/).forEach(t=>{this.forEach(n=>n.addEventListener(t,e,o))}),this})),q.extend("delegate",(function(t,e,o){return this.on(t,t=>{this.find(e).forEach(e=>{q.inPath(t,e)&&o.call(e,t,e)})},{capture:!0}),this}))})();