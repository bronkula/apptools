(t=>{const e={},a={navigate:(a,s=!0)=>{"back"==a?null!=t.history.state&&t.history.back():t.history.pushState?l({title:a,url:t.location.origin+t.location.pathname+"#"+a},s):t.location.assign(e.url)},matches:e=>{let a=t.location.hash.substr(1).split("/"),l=e.split("/");return l[0]==a[0]&&l.length==a.length},make:(e,a=(()=>{}))=>{let l=t.location.hash.substr(1).split("/");for(let[t,a]of Object.entries(e)){let e=t.split("/");if(e[0]==l[0]&&e.length==l.length){let t={};return e.forEach((e,a)=>{e!==l[a]&&(t[e.substr(1)]=l[a])}),a(t)}}return a()}},l=(a,l)=>{null==a&&(a={title:t.location.hash.substr(1),url:t.location.href}),e.state={...a},t.history[l?"pushState":"replaceState"](a,a.title,a.url),t.document.dispatchEvent(new CustomEvent("pageshow",{detail:{nextPage:{...a},prevPage:{...e.state}}}))};t.q?(q(()=>{q(document).delegate("click","a[href^='#']",t=>{t.preventDefault();let e=t.target.attributes.href.value.substr(1);""!=e&&a.navigate(e)})}),q.route=a):t.route=a,t.addEventListener("load",()=>{setTimeout(()=>t.addEventListener("popstate",t=>l(t.state)),0)}),t.addEventListener("DOMContentLoaded",t=>l(null))})(window);