(t=>{const e={},a={navigate:(a,l=!0)=>{"back"==a?null!=t.history.state&&t.history.back():t.history.pushState?i({title:a,url:t.location.origin+t.location.pathname+"#"+a},l):t.location.assign(e.url)},matches:(t,e)=>{if(t[0]!=e[0])return!1;let a={};for(let i in t)if(t[i]!=e[i])if(":"==e[i].slice(0,1))a[e[i].slice(1)]=t[i];else if(t[i]!=e[i])return!1;return a},make:(e,i=(()=>{}),l)=>{let n=l||t.location.hash.slice(1),s=n.split("/"),o={};if(""!=n)for(let[t,l]of Object.entries(e)){if(o={},t==n){i=l;break}let e=t.split("/");if(e[0]==s[0]&&e.length==s.length&&(o=a.matches(s,e),!1!==o)){i=l;break}}return t=>i(o,t)}},i=(a,i)=>{null==a&&(a={title:t.location.hash.slice(1),url:t.location.href}),e.state={...a},t.history[i?"pushState":"replaceState"](a,a.title,a.url),t.document.dispatchEvent(new CustomEvent("pageshow",{detail:{nextPage:{...a},prevPage:{...e.state}}}))};t.q?(q(()=>{q(document).delegate("click","a[href^='#']",(function(t){t.preventDefault();let e=this.attributes.href.value.slice(1);""!=e&&a.navigate(e)}))}),q.route=a):t.route=a,t.addEventListener("load",()=>{setTimeout(()=>t.addEventListener("popstate",t=>i(t.state)),0)}),t.addEventListener("DOMContentLoaded",t=>i(null))})(window);