(t=>{const e={},a={navigate:(a,s=!0)=>{"back"==a?null!=t.history.state&&t.history.back():t.history.pushState?n({title:a,url:t.location.origin+t.location.pathname+"#"+a},s):t.location.assign(e.url)},matches:(t,e)=>{if(t[0]!=e[0])return!1;let a={};for(let n in t)if(t[n]!=e[n])if(":"==e[n].substr(0,1))a[e[n].substr(1)]=t[n];else if(t[n]!=e[n])return!1;return a},make:(e,n=(()=>{}),s)=>{let i=s||t.location.hash.substr(1),r=i.split("/"),l={};for(let[t,s]of Object.entries(e)){if(l={},t==i){n=s;break}let e=t.split("/");if(e[0]==r[0]&&e.length==r.length&&(l=a.matches(r,e),!1!==l)){n=s;break}}return t=>n(l,t)}},n=(a,n)=>{null==a&&(a={title:t.location.hash.substr(1),url:t.location.href}),e.state={...a},t.history[n?"pushState":"replaceState"](a,a.title,a.url),t.document.dispatchEvent(new CustomEvent("pageshow",{detail:{nextPage:{...a},prevPage:{...e.state}}}))};t.q?(q(()=>{q(document).delegate("click","a[href^='#']",(function(t){t.preventDefault();let e=this.attributes.href.value.substr(1);""!=e&&a.navigate(e)}))}),q.route=a):t.route=a,t.addEventListener("load",()=>{setTimeout(()=>t.addEventListener("popstate",t=>n(t.state)),0)}),t.addEventListener("DOMContentLoaded",t=>n(null))})(window);